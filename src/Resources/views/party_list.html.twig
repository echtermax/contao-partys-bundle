{# src/Resources/views/party_list.html.twig #}

{% if parties|length > 0 %}
  <div class="container my-4">
    <div class="row row-cols-1 g-4">
      {% for party in parties %}
        <div class="col">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title">{{ party.title }}</h5>
              
              <div class="mb-3">
                {% if party.formattedDate %}
                  <p class="mb-1">
                    <strong>Datum:</strong> {{ party.formattedDate }}
                    {% if party.formattedTime %}
                      <br>
                      <strong>Uhrzeit:</strong> {{ party.formattedTime }}
                    {% endif %}
                  </p>
                {% endif %}
                
                {% if party.location %}
                  <p class="mb-1">
                    <strong>Ort:</strong> {{ party.location }}
                  </p>
                {% endif %}
              </div>
              
              {% if party.description %}
                <div class="card-text">
                  {{ party.description|raw }}
                </div>
              {% endif %}
            </div>
            
            {% if party.date > 0 %}
              <a href="{{ path('download_party_ics', { id: party.id }) }}" target="_blank" class="btn btn-primary w-100 rounded-0 rounded-bottom">
                <i class="bi bi-calendar-plus me-2"></i>
              </a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% else %}
  <div class="container my-5">
    <div class="alert alert-info text-center" role="alert">
      Derzeit sind keine Veranstaltungen geplant.
    </div>
  </div>
{% endif %}